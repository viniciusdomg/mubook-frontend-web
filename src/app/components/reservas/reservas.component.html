<p class="ml-[150px] text-2xl ">Fazer Reservas</p>

<div class="ml-[150px] mt-[80px] max-w-[400px]">
  <div class="flex items-center gap-4 mb-6">
    <p class="text-lg text-gray-700 w-[120px] whitespace-nowrap">Tipo de quadra:</p>
    <select
      [(ngModel)]="quadraSelecionada"
      class="border border-gray-300 rounded px-4 py-2 w-[280px] text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#6D71FF]"
    >
      <option value="" disabled>Selecione o tipo de quadra</option>
      <option value="futsal">Futsal</option>
      <option value="volei">Vôlei</option>
      <option value="basquete">Basquete</option>
      <option value="tenis">Tênis</option>
      <option value="areia">Areia</option>
    </select>
  </div>

  <div class="flex items-center gap-4 mb-6">
    <p class="text-lg text-gray-700 w-[120px]">Data:</p>
    <input
      type="date"
      [(ngModel)]="dataSelecionada"
      [min]="dataMinima"
      class="border border-gray-300 rounded px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#6D71FF]"
    />
  </div>

  <div class="flex items-center gap-4 mb-8">
    <p class="text-lg text-gray-700 w-[120px]">Horário:</p>
    <input
      type="time"
      [(ngModel)]="horaSelecionada"
      class="border border-gray-300 rounded px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#6D71FF]"
    />
  </div>

  <button
    (click)="fazerReserva()"
    class="bg-[#6D71FF] text-white px-6 py-2 rounded hover:bg-[#5a5ee0] transition"
  >
    Fazer Reserva
  </button>
</div>

<div class="mt-20">
  <div class="flex items-center justify-center gap-4 mt-16">

    <!-- Botão voltar -->
    <button
      (click)="goPrev2()"
      class="p-2 bg-gray-200 rounded hover:bg-gray-300 transition"
    >
      ←
    </button>

    <!-- Anterior do anterior -->
    <div
      class="w-[140px] h-[85px] bg-white border border-gray-300 shadow flex flex-col items-center justify-center opacity-40 scale-75 cursor-pointer p-1 text-xs text-center text-green-600"
      (click)="setActive2((prevIndex2() - 1 + items2.length) % items2.length)"
    >
      {{ items2[(prevIndex2() - 1 + items2.length) % items2.length].nome }}
    </div>

    <!-- Anterior -->
    <div
      class="w-[300px] h-[200px] bg-white border border-gray-300 shadow-md flex flex-col items-center justify-center cursor-pointer p-2 text-center text-green-600"
      (click)="setActive2(prevIndex2())"
    >
      <h3 class="font-semibold">{{ items2[prevIndex2()].nome }}</h3>
      <p>Quadra: {{ items2[prevIndex2()].quadra }}</p>
      <p>Data: {{ items2[prevIndex2()].data }}</p>
      <p>Hora: {{ items2[prevIndex2()].hora }}</p>
      <p>Convidados: {{ items2[prevIndex2()].convidados }}</p>
    </div>

    <!-- Ativo -->
    <div
      class="w-[300px] h-[200px] bg-white border border-red-500 shadow-lg flex flex-col items-center justify-center p-2 text-center text-green-600"
    >
      <h3 class="font-bold text-lg">{{ items2[activeIndex2].nome }}</h3>
      <p>Quadra: {{ items2[activeIndex2].quadra }}</p>
      <p>Data: {{ items2[activeIndex2].data }}</p>
      <p>Hora: {{ items2[activeIndex2].hora }}</p>
      <p>Convidados: {{ items2[prevIndex2()].convidados }}</p>
    </div>

    <!-- Próximo -->
    <div
      class="w-[300px] h-[200px] bg-white border border-gray-300 shadow-md flex flex-col items-center justify-center cursor-pointer p-2 text-center text-green-600"
      (click)="setActive2(nextIndex2())"
    >
      <h3 class="font-semibold">{{ items2[nextIndex2()].nome }}</h3>
      <p>Quadra: {{ items2[nextIndex2()].quadra }}</p>
      <p>Data: {{ items2[nextIndex2()].data }}</p>
      <p>Hora: {{ items2[nextIndex2()].hora }}</p>
      <p>Convidados: {{ items2[prevIndex2()].convidados }}</p>
    </div>

    <!-- Próximo do próximo -->
    <div
      class="w-[140px] h-[85px] bg-white border border-gray-300 shadow flex flex-col items-center justify-center opacity-40 scale-75 cursor-pointer p-1 text-xs text-center text-green-600"
      (click)="setActive2((nextIndex2() + 1) % items2.length)"
    >
      {{ items2[(nextIndex2() + 1) % items2.length].nome }}
    </div>

    <!-- Botão avançar -->
    <button
      (click)="goNext2()"
      class="p-2 bg-gray-200 rounded hover:bg-gray-300 transition"
    >
      →
    </button>
  </div>
</div>

<hr class="border-t border-gray-300 w-full" />
<p class="ml-[150px] text-2xl ">Histórico de Reservas</p>

<table class="table-auto w-full border border-gray-300 text-sm text-center mt-10">
  <thead class="bg-gray-100 text-gray-700">
    <tr>
      <th class="px-4 py-2 border">Quadra</th>
      <th class="px-4 py-2 border">Data</th>
      <th class="px-4 py-2 border">Horário</th>
      <th class="px-4 py-2 border">Status</th>
      <th class="px-4 py-2 border">Ações</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let reserva of items2">
      <td class="px-4 py-2 border">{{ reserva.quadra }}</td>
      <td class="px-4 py-2 border">{{ reserva.data }}</td>
      <td class="px-4 py-2 border">{{ reserva.hora }}</td>
      <td class="px-4 py-2 border">
        <span
          class="px-2 py-1 rounded text-white"
          [ngClass]="{
            'bg-green-500': isAtiva(reserva),
            'bg-gray-400': !isAtiva(reserva)
          }"
        >
          {{ isAtiva(reserva) ? 'Ativa' : 'Expirada' }}
        </span>
      </td>
      <td class="px-4 py-2 border">
        <button
          class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 mr-2"
          (click)="editarReserva(reserva)"
        >
          Editar
        </button>
        <button
          class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600"
          (click)="excluirReserva(reserva)"
        >
          Excluir
        </button>
      </td>
    </tr>
  </tbody>
</table>

